# üßÆ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

[![Go Report Card](https://goreportcard.com/badge/github.com/yourusername/calc_service)](https://goreportcard.com/report/github.com/yourusername/calc_service)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π (`+`, `-`, `*`, `/`)
- –¢–∞–π–º–∞—É—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ì–æ—Ç–æ–≤—ã–µ Docker-–æ–±—Ä–∞–∑—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
git clone https://github.com/yourusername/calc_service.git
cd calc_service
docker-compose up --build
```

## –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
make build

# –ó–∞–ø—É—Å–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
export PORT=8080 TIME_ADDITION_MS=1000 TIME_SUBTRACTION_MS=1000
./bin/orchestrator

# –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
export ORCHESTRATOR_URL=http://localhost:8080 COMPUTING_POWER=4
./bin/agent
```

# üì° API Endpoints

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
```json
curl -X POST http://localhost:8080/api/v1/calculate \
  -H "Content-Type: application/json" \
  -d '{"expression": "(2+3)*4"}'
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "pending",
  "created_at": "2024-03-20T12:00:00Z"
}
```

### üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
```bash
curl http://localhost:8080/api/v1/expressions/550e8400-e29b-41d4-a716-446655440000
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "done",
  "result": 20.0,
  "created_at": "2024-03-20T12:00:00Z"
}
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä]
B --> C[–ü–∞—Ä—Å–µ—Ä]
C --> D[–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á]
D --> E[–ê–≥–µ–Ω—Ç 1]
D --> F[–ê–≥–µ–Ω—Ç 2]
E -->|–†–µ–∑—É–ª—å—Ç–∞—Ç| B
F -->|–†–µ–∑—É–ª—å—Ç–∞—Ç| B
B --> G[(–•—Ä–∞–Ω–∏–ª–∏—â–µ)]

# ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|--------------------------|--------------|------------------------------|
| `PORT`                   | 8080         | –ü–æ—Ä—Ç HTTP-—Å–µ—Ä–≤–µ—Ä–∞            |
| `TIME_ADDITION_MS`       | 1000         | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–µ–Ω–∏—è    |
| `TIME_SUBTRACTION_MS`    | 1000         | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—á–∏—Ç–∞–Ω–∏—è   |
| `TIME_MULTIPLICATION_MS` | 2000         | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–º–Ω–æ–∂–µ–Ω–∏—è   |
| `TIME_DIVISIONS_MS`      | 2000         | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–ª–µ–Ω–∏—è     |

### –ê–≥–µ–Ω—Ç
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è             | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|------------------------|-------------|-----------------------------------|
| `ORCHESTRATOR_URL`     | –î–∞          | URL –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `http://localhost:8080`) |
| `COMPUTING_POWER`      | –î–∞          | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤  |



# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í—Å–µ —Ç–µ—Å—Ç—ã:
```bash
make test
```

### –¢–µ—Å—Ç—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥–æ–Ω–æ–∫:
```bash
make race-test
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:
```bash
make coverage
```
